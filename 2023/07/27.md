#### 2023.7.26 | OAuth - OAuth 1.0

인증 (Authentication): 온라인에서 사용자의 신원을 확인하는 행위를 인증이라고 한다. 예를 들어, 로그인 시에 사용자 ID와 비밀번호를 입력하여 사용자가 누구인지 확인하는 것이 인증 과정이다.

인가 (Authorization): 인증된 사용자가 어떤 자원에 대해 수행할 수 있는 행동(예: 읽기, 쓰기, 삭제 등)을 결정하는 과정이다. 사용자가 행위에 대한 허용된 권한을 갖고 있는지 확인하는 것이다. 

OAuth를 가장 많이 사용하는 사례는 소셜로그인이다. 

#### OAuth 1.0 인가 프로토콜

OAuth 1.0 프로토콜에서의 핵심 역할

(Resource Owner) (OAuth Client) (OAuth Server)

1. 리소스 소유자(Resource Owner): 리소스 소유자는 보통 'end-user'를 즉, 일반 사용자 자연인을 의미하여 보호된 리소스에 대한 접근 권한을 가진 개체이다. 예를 들어, 페이스북 사용자는 자신의 프로필 정보, 사진, 친구 목록 등과 같은 페이스북 데이터에 대한 접근 권한을 가지고 있다. 
2. OAuth 클라이언트(OAuth Client): OAuth 클라이언트는 리소스 소유자가 가진 리소스에 접근하여 활용을 하려는 애플리케이션이다. 예를 들어 사용자가 Spotify를 사용하여 페이스북 친구의 플레이리스트에 접근하려면 Spotify가 OAuth 클라이언트 역할을 한다.
3. OAuth 서버(OAuth Server): OAuth 서버는 보호된 리소스를 호스팅하는 서버로, 리소스 소유자의 신분을 확인해서 인증을 하고 서로 상호작용을 하면서 OAuth 클라이언트에게 역할을 인가하고 있다.페이스북에서는 OAuth 서버가 사용자의 데이터에 대한 접근을 관리하며, 클라이언트에게 적절한 접근 토큰을 발급한다.

이 세 가지 역할을 OAuth 프로토콜이 동작하는 핵심적인 요소이며, 이들 사이의 상호 작용을 통해 OAuth의 인가 과정을 구성한다. 

#### OAuth 1.0의 프로세스
OAuth 클라이언트는 OAuth 서버에게 리소스 소유자의 의도를 API 호출을 통해 알리게 된다. OAuth 서버는 응답으로 OAuth 클라이언트에게 리소스 소유자가 어느 웹 주소에서 인증을 하고 OAuth 클라이언트에 대한 인가 작업을 할 수 있는지 응답을 보내게 된다. 응답을 받은 OAuth 클라이언트는 리소스 오너에게 HTTP 302 redirect 또는 비슷한 웹 기반의 redirect 방식을 사용해서 리소스 오너를 OAuth 서버가 호스팅하는 웹사이트로 보내게 된다. 리소스 오너는 ID와 비밀번호를 입력을 하고 여러 플로우를 지나 마지막으로 사용하려는 서비스에 대한 권한을 인가하게 된다. 인가 작업이 끝나면 OAuth 서버는 HTTP 302 redirect 혹은 웹기반 redirect 방식을 사용해 받은 인증값을 OAuth client에게 전달하게 된다. 마지막으로 OAuth Client는 이 인증값을 받아서 API 호출을 통해 OAuth 서버로부터 인가 권한을 나타내는 토큰 String 값을 전달 받게 된다. 이 후로 OAuth Client는 리소스 소유자를 대신해서 OAuth 서버의 서비스에 접근을 할 때 해당 토큰을 사용해서 리소스에 접근을 하게 된다. 아이디와 비밀번호 값이 OAuth 클라이언트 측에 한번도 전달되지 않았지만 해당 리소스에 대한 인증과 인가 절차가 이루어졌다. 

#### OAuth 1.0의 문제점
1. Scope 개념 없음
2. 역할이 확실히 나누어지지 않음
3. 토큰 유효기간 문제
4. Client 구현 복잡성
5. 제한적인 사용 환경