#### 2023.7.26 | OOP

객체지향 > 기능 + 캡슐화 + 추상화

기능 > 역할/책임(누가 뭘 할지 정하는 것) 기능을 잘 나누는 것이 중요하다. 기능을 분해하는 연습이필요하다 . 하나의 기능을 여러 하위 기능을 나누는 연습을 해보자. 

EX) 회원가입
- 중복 체크
- member 테이블에 insert
- 회원 가입 이메일 발송

하위 기능을 분리할 때는 어떻게 구현(How) 하기에 집중하기보다는 무엇(What)을 하는지에 집중하는 것이 필요하다. 그다음에는 이 하위 기능을 누가 할지 생각해 보자 회원가입의 전반적인 로직인 Register Service가 담당하고 값을 검정하는 것은 RequestValidator 하고 회원을 저장하기 위해서 회원 모델을 생성하는 것은 회원 가입에서 MemberFactory가 할지 나눈 기능을 내 마음데로 할당해 본다. 기능을 나누고 적절히 배분하는 연습을 많이 해본다. 나눈 역할로 상상 실험을 많이 해봐야 하는 데 도출한 구성 요소를 플로우 그림으로 그려서 상호 관계가 어떻게 되는지 확인해 보면 도움이 많이 된다. 상상을 하는 과정에서 실제 구현에 대한 생각도 같이 하게 되면서 변경사항들도 다시 적용할 수 있다. 

또한, 테스트를 설계 도구로 사용하면 많은 도움이 된다. 테스트라는 것은 입력.상황이 주어졌을 때 출력과 결과가 어떻게 되어야 하는지 기술을 하는 데 즉 기능 명세에 집중을 하게 되고 구현를 뒤로 생각하게 되고 What에 집중을 하게 된다. 테스트는 역할 분리를 유도하는 효과가 있다. 테스트를 가능하게 만들려고 하다보면 역할이 자연스럽게 분리되는 경험을 할 수 있다. 만약 회원 가입 기능 테스트에서 회원 가입 시 후속 절차를 안내하는 이메일을 발송하는 데 해당 기능을 지금 바로 구현할지 나중에 구현할지 선택을 해야 한다. 해당 구현 양이 많아 나중에 구현을 할 경우 별도의 역할 구성요소로 도출 된다. 그렇게 도출한 것은 Mocking으로 테스트에서 사용하는 구현을 마치고 그다음에 구현하는 방식으로 진행이 된다. 이런 과정에서 자연스럽게 역할을 분리하는 연습이 된다.

플로우에 대한 다른 누군가와 공유할 때는 시각화 도구인 UML를 사용하면 오해 없이 소통을 잘할 수 있다. 마인드 맵 같은 경우는 상위 수준의 어떤 개념/대상이 있을 때 하위 계층적으로 분리할 수 있는 시각적인 도구로 유용하게 사용할 수 있다. 

객체지향을 잘하려면 역할을 나누고 할당하는 연습을 잘 해야 하고 구성 요소 관계 및 상호 작용을 시각화하는 연습도 하면 좋다. 무엇/의도에 집중해서 역할을 나누는 연습을 하다 보면 내가 만드는 구성요소가 외부에 덜 영향을 받는 형태가 될 가능성이 높아진다. 