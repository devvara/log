#### 2023.8.3 | WebSocket

웹소켓(WebSocket)은 단일 TCP 연결을 사용하여 서버와 클라이언트 간에 양방향 통신 채널을 제공하는 프로토콜입니다. 

서버와 유저가 데이터를 주고받으려면 정통적인 방식으로 http가 있다. 유저가 서버한테 데이터를 요청하면 서버가 데이터를 보내주는 방식으로 구현을 하면 된다. http 요청을 쉽게 비유하자면 문자메시지랑 비슷하다. 서버한테 데이터를 달라고 문자 메시지를 보내면 서버가 문자를 확인하고 데이터를 담아서 답변을 한다. 하지만 해당 경우 문자 메시지는 맞는데 서버가 유저한테 먼저 문자메시지를 보낼 수는 없다. 

90년대까지만 하더라도 http 요청만으로 모든 웹서비스를 만들 수 있었다. 요즘 웹서비스는 실시간 채팅, 게임, 주식거래까지 복잡해졌다. 예를 들어 코인 거래소에 들어가면 실시간으로 2초마다 서버에서 코인 가격을 가져와서 웹 페이지에 보여줘야 한다. 2초마다 서버에 http 요청하면 끝이다. 근데 이 방식을 잠깐 생각해 보면 2초마다 요청을 하는 게 비효율적이다. 서버가 알아서 2초마다 보내주면 효율적일 것이다. 전통방식인 http 요청만으로는 구현이 불가능해서 다음과 같은 두가지 방식을 사용해서 구현할 수 있다. 

1. Sever-Sent Event (http 통신을 종료안하고 계속 유지, 단점은 서버만 일방적으로 메시지를 보낼 수 있다. 일종의 라디오 같은 것 유저는 듣기만 가능하다.)
2. Websocket

WebSocket의 경우 TCP 연결 기반으로 서버와 유저가 양방향 통신이 가능하다. 비유하자면 전화랑 동일하다. 유저가 서버한테 http 요청 웹소켓으로 통신하자고 요청을 하면 서버가 이것을 허락을 하면 http 요청을 웹소켓으로 업그레이드 해줄 수 있다. 양방향 웹소켓 통신이 시작되는 것이다. 